<!DOCTYPE html>
<html lang="en-us">
	<head>
		<title>NodeCG - notes.lmorchard.com</title>
		<meta property="og:site_name" content="{{$:/core/wiki/title}}" />
		<meta property="og:type" content="article" />
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />

		<link rel="stylesheet" href="https://blog.lmorchard.com/css/screen.css" type="text/css" media="screen, projection" />
		<link rel="stylesheet" href="https://blog.lmorchard.com/css/vendor/font-awesome.css" type="text/css" media="screen, projection" />
		<link rel="stylesheet" href="https://blog.lmorchard.com/css/vendor/prism.css" type="text/css" media="screen, projection" />

		<style type="text/css">
			section.content article.wiki h1 {
				margin-bottom: 0.75em;
			}
			section.content article.wiki .backlinks h4 {
				margin: 1.5em 0 1.0em 0;
				padding: 0;
			}
		</style>
	</head>
	<body>
		<section class="main">
			<header>
				<h1><a href="./index.html">notes.lmorchard.com</a></h1>
				<h2>thinking with the lid off</h2>
				<nav>
					<label for="nav-trigger"></label>
					<input type="checkbox" id="nav-trigger" class="nav-trigger" />
					<ul>
						<li><a href="http://lmorchard.com/">about me</a></li>
						<li><a href="./RecentChanges.html">recent changes</a></li>
					</ul>
				</nav>
			</header>
			<section class="content">
				<article class="post wiki">
					<h1 class="title">NodeCG</h1>
					<section class="post-content">
						<p>Create broadcast graphics using Node.js and a browser.</p><h2 class="">My bundles:</h2><ul><li><a class="tc-tiddlylink-external" href="https://github.com/lmorchard/nodecg-sam-say" rel="noopener noreferrer" target="_blank">https://github.com/lmorchard/nodecg-sam-say</a></li><li><a class="tc-tiddlylink-external" href="https://github.com/lmorchard/nodecg-file-watcher" rel="noopener noreferrer" target="_blank">https://github.com/lmorchard/nodecg-file-watcher</a></li></ul><h2 class="">Notes</h2><p><a class="tc-tiddlylink tc-tiddlylink-resolves" href="NodeCG.html">NodeCG</a> is pretty skeletal, but it offers some really interesting structure:</p><ul><li>Bundles, which contain:<ul><li>Dashboard panels</li><li>Graphics pages</li><li>Server-side Extensions</li><li>A package.json based manifest for overall declarative configuration</li></ul></li><li>Websocket-based isomorphic API for:<ul><li>Sending &amp; receiving messages in client-side dashboard, client-side graphics, and server-side extensions</li><li>Replicant variables whose values are sync'd across dashboards, graphics, and extensions</li></ul></li><li>An express-based web server that's easy to:<ul><li>Mount new static file paths from within bundles</li><li>Mount new express Custom Routes from server-side extension scripts</li></ul></li><li>A master dashboard / control panel UI that provides:<ul><li>An overall UI to manage dashboard panels from all bundles, organized into workspaces</li><li>An inventory of all graphics pages from all bundles</li><li>Media upload management for images, sounds, videos, etc.</li><li>A master mixer panel for playing sounds (still need to investigate this one)</li></ul></li><li>And misc other things like:<ul><li>Configuration</li><li>Logging</li><li>Audio management in graphics</li><li>Seems to use polymer &amp; web components for it's UI</li></ul></li></ul><h2 class="">Prose</h2><p>This thing is looking really promising as a new backbone for what I'm trying to do with <a class="tc-tiddlylink tc-tiddlylink-resolves" href="CaffeinaBot.html">CaffeinaBot</a>.</p><p>Also kind of want to blog about this stuff. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="NodeCG.html">NodeCG</a> has a neat architecture that pretty much matches what I've played around with building in my last two attempts at a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="StreamBot.html">StreamBot</a>.</p><p><a class="tc-tiddlylink tc-tiddlylink-resolves" href="NodeCG.html">NodeCG</a> has a concept of dashboards and graphics. Dashboard panels are the web UI from which you control things. Graphics are web pages you load up into OBS as browser sources. </p><p>There's a web socket messaging system between dashboard panels and graphics, which allow you to directly control the graphics.</p><p>There are also server-side extension scripts that can hook into the express web server, run various server-side integrations (e.g. Twitch chat? OBS websockets?)</p><p>There's an API object that's mostly isomorphic between server extensions, dashboard panels, and graphics pages. That's super cool. This means that I can send a message from the server and receive it in a panel or a graphics page, or vice versa.</p><p>There's also the concept of &quot;replicants&quot; - variables whose values are kept in sync between server, dashboard, and graphics. That is, if you change the value of a replicant in a dashboard, both graphics and server-side extension code receive the change and can react to it. That means I can set up input fields on a dashboard panel to tweak things in graphics, or the server can tweak values to update both dashboard and graphics. Oh, and replicant values are persisted to disk - so when the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="NodeCG.html">NodeCG</a> server restarts, all the previous state is restored.</p><p>For both replicants and events, all the messaging and sync details handled over websockets are abstracted away into a simple API. So I don't have to worry about how any of that works</p><h2 class="">Links</h2><ul><li><a class="tc-tiddlylink-external" href="https://github.com/nodecg/nodecg" rel="noopener noreferrer" target="_blank">https://github.com/nodecg/nodecg</a></li><li><a class="tc-tiddlylink-external" href="https://twitter.com/nodecg" rel="noopener noreferrer" target="_blank">https://twitter.com/nodecg</a></li></ul>
						<section class="backlinks">
							<h4>Backlinks</h4>
							<ul>
								
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252011">2020 / 05 / 11</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252013">2020 / 05 / 13</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252014%2520-%2520stream%2520notes">2020 / 05 / 14 - stream notes</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252015">2020 / 05 / 15</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252016">2020 / 05 / 16</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252016%2520-%2520stream%2520notes">2020 / 05 / 16 - stream notes</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252018">2020 / 05 / 18</a>
										</li>
									
										<li>
											<a href="./2020%2520%252F%252005%2520%252F%252019">2020 / 05 / 19</a>
										</li>
									
										<li>
											<a href="./BlogPostIdeas">BlogPostIdeas</a>
										</li>
									
										<li>
											<a href="./StreamAutomation">StreamAutomation</a>
										</li>
									
								
							</ul>
						</section>
					</section>
				</article>
			</section>
			<footer>
				<img id="growup" src="https://blog.lmorchard.com/uploads/growup.jpg" />
			</footer>
		</section>
	</body>
</html>
